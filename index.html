<!DOCTYPE html>
<html lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:v="urn:schemas-microsoft-com:vml"
  xmlns:o="urn:schemas-microsoft-com:office:office">

  <head>
    <title>RageQuit Press â€” Weekly Roast (Assignment 3)</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <style type="text/css">
      /*
        Reduce layout inconsistencies across email clients.
      */
      body, table, td, a { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }
      table, td { mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
      img { -ms-interpolation-mode: bicubic; }

      /* Baseline reset to avoid unexpected spacing/underlines in email-like rendering */
      img { border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
      table { border-collapse: collapse !important; }
      body { height: 100% !important; margin: 0 !important; padding: 0 !important; width: 100% !important; }

      /* Apple Blue Link Fixes */
      a[x-apple-data-detectors] {
        color: inherit !important;
        text-decoration: none !important;
        font-size: inherit !important;
        font-family: inherit !important;
        font-weight: inherit !important;
        line-height: inherit !important;
      }

      /* Hover states for interactive elements (progressive enhancement) */
      .hover-bg:hover { background-color: #5fa5f7 !important; } /* darker blue */
      .hover-underline:hover { text-decoration: underline !important; }

      /* DARK MODE (Web Preview Only)
         In a real email context, we would use @media (prefers-color-scheme: dark)
         or specific [data-ogsc] hacks for Outlook. Here we use a manual class toggle.
      */
      body.dark { background-color: #111827 !important; color: #e5e7eb !important; }
      body.dark .email-container { background-color: #1f2937 !important; border: 1px solid #374151; }
      body.dark h1, body.dark h2, body.dark h3 { color: #f3f4f6 !important; }
      body.dark .card { background-color: #1f2937 !important; border: 1px solid #374151 !important; }
      body.dark .footer-text { color: #9ca3af !important; }
      body.dark a { color: #60a5fa !important; } /* lighter blue link */

      /* Reader Mode (No images) */
      body.no-images img { opacity: 0.1; filter: grayscale(100%); }
      body.no-images .img-placeholder {
         display: block !important; 
         background: #eee; 
         color: #333; 
         padding: 20px; 
         text-align: center;
         border: 1px dashed #999;
      }

      /* ACCESSIBILITY OVERRIDES (Web Preview Only) */
      
      /* Restore focus rings for keyboard users (Axe: Focusable content must have focus style) */
      img:focus, img:focus-visible, 
      div[role="button"]:focus, div[role="button"]:focus-visible,
      a:focus, a:focus-visible {
        outline: 2px solid #111827 !important;
        outline-offset: 2px;
      }
      body.dark img:focus, body.dark img:focus-visible,
      body.dark div[role="button"]:focus, body.dark div[role="button"]:focus-visible,
      body.dark a:focus, body.dark a:focus-visible {
        outline: 2px solid #93c5fd !important;
      }

      /* Dark Mode Text Fixes (Axe: Contrast) */
      /* Overrides inline #6b7280 for better contrast on dark backgrounds */
      body.dark .muted-text {
        color: #d1d5db !important; /* Gray-300 */
      }
    </style>
  </head>

  <body style="background-color: #f3f4f6; margin: 0; padding: 0;">

    <header role="banner" aria-label="Preview Controls">
      <div style="max-width:600px; margin:0 auto; padding:10px 0; text-align:right;">
        <button id="toggleDark" style="padding:6px 12px; cursor:pointer;" aria-label="Toggle dark mode">Dark Mode</button>
        <button id="toggleImages" style="padding:6px 12px; cursor:pointer;" aria-label="Toggle images">Skip Images</button>
        <button id="toggleReader" style="padding:6px 12px; cursor:pointer;" aria-label="Toggle reader mode">Reader Mode</button>
      </div>
    </header>

    <div style="display:none;font-size:1px;color:#333333;line-height:1px;max-height:0px;max-width:0px;opacity:0;overflow:hidden;">
      Galaxy Grind review inside! Is it trash or treasure? + This week's top 5 worst launches...
    </div>

    <center style="width: 100%; background-color: #f3f4f6;">
      <div class="email-container" style="max-width: 600px; margin: 0 auto; background-color: #ffffff;">
        
        <table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="width:600px; margin:0 auto;">
          <tr>
            <td id="main" class="px" align="center" width="600" style="padding-left:20px; padding-right:20px; padding-bottom:40px;">

              <div role="main" style="width:100%;">

                <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td align="center" style="padding-top: 40px; padding-bottom: 20px;">
                      <img 
                        id="bannerImg"
                        src="images/banner-light.png" 
                        data-src-light="images/banner-light.png"
                        data-src-dark="images/banner-dark.png"
                        width="300" 
                        alt="RageQuit Press Logo - Click to toggle Theme" 
                        style="display: block; border: 0; max-width: 100%; cursor: pointer;"
                        tabindex="0"
                        role="button"
                        aria-pressed="false"
                        aria-label="Toggle dark mode theme"
                      />
                    </td>
                  </tr>
                </table>

                <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td align="center" style="padding-bottom: 30px;">
                      <img 
                        id="heroImg"
                        src="images/hero-a.png" 
                        data-src-a="images/hero-a.png"
                        data-src-b="images/hero-b.png"
                        width="560" 
                        alt="Hero image: Galaxy Grind Game Review Cover Art. Click to toggle evidence." 
                        style="display: block; border: 0; max-width: 100%; border-radius: 8px; cursor: pointer;"
                        tabindex="0"
                        role="button"
                        aria-pressed="false"
                        aria-label="Toggle evidence mode for Galaxy Grind review"
                      />
                    </td>
                  </tr>
                  <tr>
                    <td align="center" style="font-family: 'Arial Black', sans-serif; font-size: 28px; line-height: 34px; color: #111827;">
                      Galaxy Grind: An Infinite Loop of Sadness?
                    </td>
                  </tr>
                  <tr>
                    <td align="center" style="padding-top: 15px; font-family: sans-serif; font-size: 16px; line-height: 24px; color: #4b5563;">
                      We spent 40 hours mining virtual rocks so you don't have to. Spoiler: The rocks win.
                    </td>
                  </tr>
                  <tr>
                    <td align="center" style="padding-top: 25px;">
                      <a href="signup.html" class="hover-bg" style="background-color: #2563eb; color: #ffffff; padding: 14px 28px; border-radius: 6px; text-decoration: none; font-family: sans-serif; font-weight: bold; display: inline-block;">
                        Read the Full Roast &rarr;
                      </a>
                    </td>
                  </tr>
                  <tr>
                    <td align="center" style="padding-top: 10px;">
                       <div class="muted-text" style="font-family:sans-serif; font-size:12px; line-height:18px; color:#6b7280; margin-top:8px;">
                          (Web preview only: click image to toggle evidence)
                       </div>
                    </td>
                  </tr>
                </table>

                <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td style="padding: 40px 0;">
                      <div style="height: 1px; background-color: #e5e7eb; line-height: 1px;">&nbsp;</div>
                    </td>
                  </tr>
                </table>

                <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td style="padding-bottom: 20px;">
                      <h2 style="margin:0; font-family:'Arial Black', sans-serif; font-size:20px; color:#111827;">Quick Hits</h2>
                    </td>
                  </tr>
                  <tr>
                    <td id="quickHitsContainer">
                      <p style="font-family:sans-serif; color:#6b7280;">Loading hits...</p>
                    </td>
                  </tr>
                </table>

                <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td style="padding: 40px 0;">
                      <div style="height: 1px; background-color: #e5e7eb; line-height: 1px;">&nbsp;</div>
                    </td>
                  </tr>
                </table>

                <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td style="padding-bottom: 20px;">
                      <h2 style="margin:0; font-family:'Arial Black', sans-serif; font-size:20px; color:#111827;">Media Drops</h2>
                    </td>
                  </tr>
                  <tr>
                    <td id="mediaDropsContainer">
                      </td>
                  </tr>
                </table>

                <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td style="padding: 40px 0;">
                      <div style="height: 1px; background-color: #e5e7eb; line-height: 1px;">&nbsp;</div>
                    </td>
                  </tr>
                </table>

                <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0" style="background-color: #f9fafb; border-radius: 8px; border: 1px solid #e5e7eb;">
                  <tr>
                    <td style="padding: 30px;">
                      <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                          <td align="center" style="font-family: 'Arial Black', sans-serif; font-size: 20px; color: #111827; padding-bottom: 10px;">
                            Don't Miss the Next Rage
                          </td>
                        </tr>
                        <tr>
                          <td align="center" style="font-family: sans-serif; font-size: 14px; color: #4b5563; padding-bottom: 20px;">
                            Join 10k+ subscribers who enjoy watching bad games burn.
                          </td>
                        </tr>
                        <tr>
                          <td align="center">
                            <form id="subscribeForm" action="signup.html" style="margin:0;">
                              <label for="emailInput" class="sr-only" style="display:none;">Email Address</label>
                              <input 
                                type="email" 
                                id="emailInput" 
                                placeholder="Enter your email" 
                                style="padding: 10px; border: 1px solid #d1d5db; border-radius: 4px; font-size: 14px; width: 60%; max-width: 250px;" 
                                required
                              />
                              <button 
                                type="submit" 
                                style="background-color: #111827; color: #ffffff; padding: 10px 20px; border: none; border-radius: 4px; font-size: 14px; cursor: pointer; margin-left: 5px;">
                                Sub
                              </button>
                            </form>
                            <div id="subMessage" style="font-family:sans-serif; font-size:12px; margin-top:10px; display:none;"></div>
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>
              
              </div>
              <div class="footer" role="contentinfo" style="margin-top: 40px; text-align: center;">
                <p class="footer-text" style="font-family: sans-serif; font-size: 12px; color: #9ca3af; line-height: 18px; margin: 0;">
                  &copy; 2025 RageQuit Press. All wrongs reserved.<br>
                  <a href="#" class="hover-underline" style="color: #6b7280; text-decoration: underline;">Unsubscribe</a> | 
                  <a href="#" class="hover-underline" style="color: #6b7280; text-decoration: underline;">View in Browser</a> |
                  <a href="#" class="hover-underline" style="color: #6b7280; text-decoration: underline;">Privacy Policy</a>
                </p>
                <p class="footer-text" style="font-family: sans-serif; font-size: 12px; color: #9ca3af; line-height: 18px; margin-top: 10px;">
                  1234 Salt Mines Road, Level 1, Basement<br>
                  San Francisco, CA 94103
                </p>
              </div>

            </td>
          </tr>
        </table>
      </div>
    </center>

    <script>
      (function() {
        console.log("RageQuit Press: Email Preview Loaded");

        // --- Data for Rendering ---
        var quickHitsData = [
          { title: "Cyber-Glitch 2078", score: "3/10", text: "It runs great if you close your eyes." },
          { title: "Farming Sim: Concrete Edition", score: "8/10", text: "Oddly satisfying grey textures." },
          { title: "Loot Box Hero", score: "0/10", text: "Ideally, you pay $5 to read this review." }
        ];

        var mediaDropsData = [
          { 
            img: "images/thumb1.jpg", 
            alt: "Thumbnail for video essay on microtransactions",
            title: "Why Your Wallet Hates You",
            desc: "A deep dive into predatory monetization."
          },
          { 
            img: "images/thumb2.jpg", 
            alt: "Thumbnail for speedrun fail compilation",
            title: "Top 10 Speedrun Fails",
            desc: "Painful to watch, harder to look away."
          }
        ];

        // --- Render Functions ---
        function renderQuickHits() {
          var container = document.getElementById("quickHitsContainer");
          if(!container) return;
          
          var html = "";
          for(var i=0; i<quickHitsData.length; i++) {
            var item = quickHitsData[i];
            html += '<div class="card" style="margin-bottom: 15px; padding: 15px; border: 1px solid #e5e7eb; border-radius: 6px; background-color: #ffffff;">';
            html += '<div style="font-family: sans-serif; font-weight: bold; color: #111827; margin-bottom: 5px;">' + item.title + ' <span style="background:#ef4444; color:white; padding:2px 6px; border-radius:4px; font-size:11px; margin-left:8px;">' + item.score + '</span></div>';
            html += '<div style="font-family: sans-serif; font-size: 14px; color: #4b5563;">' + item.text + '</div>';
            html += '</div>';
          }
          container.innerHTML = html;
        }

        function renderMediaDrops() {
          var container = document.getElementById("mediaDropsContainer");
          if(!container) return;

          var html = '<table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0">';
          for(var i=0; i<mediaDropsData.length; i++) {
            var item = mediaDropsData[i];
            // Stacked layout for reliability
            html += '<tr><td style="padding-bottom: 20px;">';
            html += '<div class="card" style="border: 1px solid #e5e7eb; border-radius: 6px; overflow: hidden; background-color: #ffffff;">';
            // Placeholder image block since we don't have real files
            html += '<div style="background-color: #d1d5db; height: 150px; width: 100%; display: flex; align-items: center; justify-content: center; color: #6b7280; font-family: sans-serif; font-size: 12px;">' + item.alt + '</div>';
            html += '<div style="padding: 15px;">';
            html += '<div style="font-family: sans-serif; font-weight: bold; color: #111827; margin-bottom: 5px;">' + item.title + '</div>';
            html += '<div style="font-family: sans-serif; font-size: 13px; color: #6b7280;">' + item.desc + '</div>';
            html += '</div></div>';
            html += '</td></tr>';
          }
          html += '</table>';
          container.innerHTML = html;
        }

        // --- Interaction Logic ---
        
        // 1. Image Swapper (Hero & Banner) + Accessibility Updates
        function setupImageSwaps() {
          var hero = document.getElementById("heroImg");
          var banner = document.getElementById("bannerImg");

          // Helper to toggle aria-pressed
          function toggleAria(el) {
            var isPressed = el.getAttribute("aria-pressed") === "true";
            el.setAttribute("aria-pressed", !isPressed);
          }

          if (hero) {
            hero.onclick = function() {
              var current = hero.getAttribute("src");
              var srcA = hero.getAttribute("data-src-a");
              var srcB = hero.getAttribute("data-src-b");
              hero.setAttribute("src", current === srcA ? srcB : srcA);
              toggleAria(hero); // Update a11y state
            };
            hero.onkeydown = function(e) {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                hero.click();
              }
            };
          }

          if (banner) {
            banner.onclick = function() {
              // Trigger global dark mode instead of local swap
              document.getElementById("toggleDark").click();
              toggleAria(banner); // Update a11y state
            };
            banner.onkeydown = function(e) {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                banner.click();
              }
            };
          }
        }

        // 2. Subscribe Simulation
        function setupSubscribeForm() {
          var form = document.getElementById("subscribeForm");
          var msg = document.getElementById("subMessage");
          if(!form) return;

          form.onsubmit = function(e) {
            // Allow default behavior so we can see the transition to signup.html
            // e.preventDefault(); 
            // Mock behavior:
            // msg.style.display = "block";
            // msg.textContent = "Thanks for subscribing! (Simulation)";
            // msg.style.color = "green";
          };
        }
        
        // 3. Contact Form (Placeholder hook)
        function setupContactForm() {
          // Future expansion
        }

        // 4. File Upload Simulator (for future assignment)
        function setupUploadSimulator() {
           // Not needed for index.html yet
        }

        // 5. Global Accessibility Toggles (Dark Mode / Reader Mode)
        function setupA11yToggles() {
          var darkBtn = document.getElementById("toggleDark");
          var readerBtn = document.getElementById("toggleReader");
          var imgBtn = document.getElementById("toggleImages");
          
          if(!darkBtn) return;

          function applyBannerTheme(isDark) {
             var banner = document.getElementById("bannerImg");
             if(!banner) return;
             var lightSrc = banner.getAttribute("data-src-light");
             var darkSrc = banner.getAttribute("data-src-dark");
             banner.setAttribute("src", isDark ? darkSrc : lightSrc);
          }

          // Check LocalStorage preference
          try {
            var isDark = localStorage.getItem("rq_dark") === "1";
            if (isDark) {
               document.body.classList.add("dark");
               applyBannerTheme(true);
            }
            if (localStorage.getItem("rq_reader") === "1") document.body.classList.add("reader");
            if (localStorage.getItem("rq_no_images") === "1") document.body.classList.add("no-images");
          } catch(e) {}

          // Toggle Handlers
          darkBtn.addEventListener("click", function() {
            document.body.classList.toggle("dark");
            var isDark = document.body.classList.contains("dark");
            applyBannerTheme(isDark);
            try { localStorage.setItem("rq_dark", isDark ? "1" : "0"); } catch(e){}
          });

          readerBtn.addEventListener("click", function() {
            document.body.classList.toggle("reader"); // Future hook for text-only mode
            try { localStorage.setItem("rq_reader", document.body.classList.contains("reader") ? "1" : "0"); } catch(e){}
          });

          imgBtn.addEventListener("click", function() {
            document.body.classList.toggle("no-images");
            try { localStorage.setItem("rq_no_images", document.body.classList.contains("no-images") ? "1" : "0"); } catch(e){}
          });
        }

        // Initialize
        setupImageSwaps();
        renderQuickHits();
        renderMediaDrops();
        setupSubscribeForm();
        setupContactForm();
        setupA11yToggles();
        setupUploadSimulator();

      })();
    </script>

  </body>
</html>
